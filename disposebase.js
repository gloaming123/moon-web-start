/* eslint-disable */
import fs from 'node:fs'
import dotenv from 'dotenv'
import saveBase64Image from './convertBase64ToImage.js'

dotenv.config()
// 读取后端爬取的数据
const data = fs.readFileSync ('./detail.json', 'utf8')
const arr = JSON.parse(data)

if (!fs.existsSync ('./src/preset.json')) {
  console.log ('文件不存在');
  } else {
  fs.unlink ('./src/preset.json', (err) => {
  if (err) throw err;
  console.log ('文件已删除');
  });
}

// 创建一个可写流
const logStream = fs.createWriteStream('./src/preset.json', { flags: 'a' })

const arr1 = []

arr.forEach((item, index) => {
  console.log('item.avatarBase64:', item.avatarBase64);
  const base64String = item.avatarBase64||'data:image/png;base64,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'
  if (item.avatarBase64 === 'undefined') {
    console.warn(`Item at index ${index} does not have a valid avatarBase64, using default value.`);
  }
  saveBase64Image(base64String, index)
})
arr.forEach((item, index) => {
  arr1.push({
    id: index + 2,
    name: item.title,
    // 个人分销码粘贴替换在此处
    url: `${item.url}?refer=${process.env.REFER_CODE}`,
    // url: `${item.url}?refer=fa4b95f2-5377-4703-b4d3-95b0951a272d`,
    desc: item.introduction,
    favicon: `/imgNew/image_${index}.jpg`,
  })
})
const arr2 = {
  data: [
    {
      id: 0,
      name: '小报童每日精选',
      groupList: [
        {
          id: 1,
          name: '小报童每日精选',
          siteList: [...arr1],
        },
      ],
    },
  ],
}
// 将信息写入到文件流
logStream.write(`${JSON.stringify(arr2)}\n`)
